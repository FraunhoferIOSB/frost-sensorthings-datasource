{"version":3,"sources":["../../src/libs/jsonpath.js"],"names":["glbl","require","isNode","module","exports","allowedResultTypes","Array","prototype","includes","item","indexOf","String","moveToAnotherArray","source","target","conditionCb","i","kl","length","key","push","splice","vm","runInNewContext","expr","context","keys","Object","funcs","code","reduce","s","func","toString","vr","JSON","stringify","replace","m","eval","arr","elem","slice","unshift","NewError","value","avoidNew","message","JSONPath","opts","obj","callback","otherTypeCallback","e","objArgs","hasOwnProperty","json","path","resultType","toLowerCase","flatten","wrap","sandbox","preventEval","parent","parentProperty","Error","autostart","ret","evaluate","self","currParent","currParentProperty","currResultType","currPreventEval","currSandbox","currOtherTypeCallback","isArray","toPathString","_obj","exprList","toPathArray","shift","_hasParentSelector","result","_trace","filter","ea","isParentSelector","undefined","_getPreferredOutput","valOrPath","concat","toPointer","_handleCallback","fullRetObj","type","preferredOutput","val","parentPropName","literalPriority","retObj","loc","x","retPush","addRet","elems","forEach","call","_walk","l","v","p","par","pr","cb","test","_slice","_eval","addType","valueType","isFinite","locProp","parts","split","t","rett","tmp","tt","tl","f","n","len","start","parseInt","end","step","Math","max","min","_v","_vname","_$_parentProperty","_$_parent","_$_property","_$_path","match","_$_v","console","log","cache","pathArr","pointer","subx","normalized","$0","$1","prop","ups","join","map","define","amd","jsonPath"],"mappings":"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","file":"jsonpath.js","sourcesContent":["/*global exports, require*/\r\n/* eslint-disable no-eval */\r\n/* JSONPath 0.8.0 - XPath for JSON\r\n *\r\n * Copyright (c) 2007 Stefan Goessner (goessner.net)\r\n * Licensed under the MIT (MIT-LICENSE.txt) licence.\r\n */\r\n\r\nvar module;\r\n(function (glbl, require) {'use strict';\r\n\r\n// Make sure to know if we are in real node or not (the `require` variable\r\n// could actually be require.js, for example.\r\nvar isNode = module && !!module.exports;\r\n\r\nvar allowedResultTypes = ['value', 'path', 'pointer', 'parent', 'parentProperty', 'all'];\r\n\r\nif (!Array.prototype.includes) {\r\n    Array.prototype.includes = function (item) { // eslint-disable-line no-extend-native\r\n        return this.indexOf(item) > -1;\r\n    };\r\n}\r\nif (!String.prototype.includes) {\r\n    String.prototype.includes = function (item) { // eslint-disable-line no-extend-native\r\n        return this.indexOf(item) > -1;\r\n    };\r\n}\r\n\r\nvar moveToAnotherArray = function (source, target, conditionCb) {\r\n  for (var i = 0, kl = source.length; i < kl; i++) {\r\n      var key = source[i];\r\n      if (conditionCb(key)) {\r\n          target.push(source.splice(i--, 1)[0]);\r\n      }\r\n  }\r\n};\r\n\r\nvar vm = isNode\r\n    ? require('vm') : {\r\n        runInNewContext: function (expr, context) {\r\n            var keys = Object.keys(context);\r\n            var funcs = [];\r\n            moveToAnotherArray(keys, funcs, function (key) {\r\n                return typeof context[key] === 'function';\r\n            });\r\n            var code = funcs.reduce(function (s, func) {\r\n                return 'var ' + func + '=' + context[func].toString() + ';' + s;\r\n            }, '');\r\n            code += keys.reduce(function (s, vr) {\r\n                return 'var ' + vr + '=' + JSON.stringify(context[vr]).replace(/\\u2028|\\u2029/g, function (m) {\r\n                    // http://www.thespanner.co.uk/2011/07/25/the-json-specification-is-now-wrong/\r\n                    return '\\\\u202' + (m === '\\u2028' ? '8' : '9');\r\n                }) + ';' + s;\r\n            }, expr);\r\n            return eval(code);\r\n        }\r\n    };\r\n\r\nfunction push (arr, elem) {arr = arr.slice(); arr.push(elem); return arr;}\r\nfunction unshift (elem, arr) {arr = arr.slice(); arr.unshift(elem); return arr;}\r\nfunction NewError (value) {\r\n  this.avoidNew = true;\r\n  this.value = value;\r\n  this.message = 'JSONPath should not be called with \"new\" (it prevents return of (unwrapped) scalar values)';\r\n}\r\n\r\nfunction JSONPath (opts, expr, obj, callback, otherTypeCallback) {\r\n    if (!(this instanceof JSONPath)) {\r\n        try {\r\n            return new JSONPath(opts, expr, obj, callback, otherTypeCallback);\r\n        }\r\n        catch (e) {\r\n            if (!e.avoidNew) {\r\n                throw e;\r\n            }\r\n            return e.value;\r\n        }\r\n    }\r\n\r\n    if (typeof opts === 'string') {\r\n        otherTypeCallback = callback;\r\n        callback = obj;\r\n        obj = expr;\r\n        expr = opts;\r\n        opts = {};\r\n    }\r\n    opts = opts || {};\r\n    var objArgs = opts.hasOwnProperty('json') && opts.hasOwnProperty('path');\r\n    this.json = opts.json || obj;\r\n    this.path = opts.path || expr;\r\n    this.resultType = (opts.resultType && opts.resultType.toLowerCase()) || 'value';\r\n    this.flatten = opts.flatten || false;\r\n    this.wrap = opts.hasOwnProperty('wrap') ? opts.wrap : true;\r\n    this.sandbox = opts.sandbox || {};\r\n    this.preventEval = opts.preventEval || false;\r\n    this.parent = opts.parent || null;\r\n    this.parentProperty = opts.parentProperty || null;\r\n    this.callback = opts.callback || callback || null;\r\n    this.otherTypeCallback = opts.otherTypeCallback || otherTypeCallback || function () {\r\n        throw new Error('You must supply an otherTypeCallback callback option with the @other() operator.');\r\n    };\r\n\r\n    if (opts.autostart !== false) {\r\n        var ret = this.evaluate({\r\n            path: (objArgs ? opts.path : expr),\r\n            json: (objArgs ? opts.json : obj)\r\n        });\r\n        if (!ret || typeof ret !== 'object') {\r\n            throw new NewError(ret);\r\n        }\r\n        return ret;\r\n    }\r\n}\r\n\r\n// PUBLIC METHODS\r\n\r\nJSONPath.prototype.evaluate = function (expr, json, callback, otherTypeCallback) {\r\n    var self = this,\r\n        flatten = this.flatten,\r\n        wrap = this.wrap,\r\n        currParent = this.parent,\r\n        currParentProperty = this.parentProperty;\r\n\r\n    this.currResultType = this.resultType;\r\n    this.currPreventEval = this.preventEval;\r\n    this.currSandbox = this.sandbox;\r\n    callback = callback || this.callback;\r\n    this.currOtherTypeCallback = otherTypeCallback || this.otherTypeCallback;\r\n\r\n    json = json || this.json;\r\n    expr = expr || this.path;\r\n    if (expr && typeof expr === 'object') {\r\n        if (!expr.path) {\r\n            throw new Error('You must supply a \"path\" property when providing an object argument to JSONPath.evaluate().');\r\n        }\r\n        json = expr.hasOwnProperty('json') ? expr.json : json;\r\n        flatten = expr.hasOwnProperty('flatten') ? expr.flatten : flatten;\r\n        this.currResultType = expr.hasOwnProperty('resultType') ? expr.resultType : this.currResultType;\r\n        this.currSandbox = expr.hasOwnProperty('sandbox') ? expr.sandbox : this.currSandbox;\r\n        wrap = expr.hasOwnProperty('wrap') ? expr.wrap : wrap;\r\n        this.currPreventEval = expr.hasOwnProperty('preventEval') ? expr.preventEval : this.currPreventEval;\r\n        callback = expr.hasOwnProperty('callback') ? expr.callback : callback;\r\n        this.currOtherTypeCallback = expr.hasOwnProperty('otherTypeCallback') ? expr.otherTypeCallback : this.currOtherTypeCallback;\r\n        currParent = expr.hasOwnProperty('parent') ? expr.parent : currParent;\r\n        currParentProperty = expr.hasOwnProperty('parentProperty') ? expr.parentProperty : currParentProperty;\r\n        expr = expr.path;\r\n    }\r\n    currParent = currParent || null;\r\n    currParentProperty = currParentProperty || null;\r\n\r\n    if (Array.isArray(expr)) {\r\n        expr = JSONPath.toPathString(expr);\r\n    }\r\n    if (!expr || !json || !allowedResultTypes.includes(this.currResultType)) {\r\n        return;\r\n    }\r\n    this._obj = json;\r\n\r\n    var exprList = JSONPath.toPathArray(expr);\r\n    if (exprList[0] === '$' && exprList.length > 1) {exprList.shift();}\r\n    this._hasParentSelector = null;\r\n    var result = this._trace(exprList, json, ['$'], currParent, currParentProperty, callback);\r\n    result = result.filter(function (ea) {return ea && !ea.isParentSelector;});\r\n\r\n    if (!result.length) {return wrap ? [] : undefined;}\r\n    if (result.length === 1 && !wrap && !Array.isArray(result[0].value)) {\r\n        return this._getPreferredOutput(result[0]);\r\n    }\r\n    return result.reduce(function (result, ea) {\r\n        var valOrPath = self._getPreferredOutput(ea);\r\n        if (flatten && Array.isArray(valOrPath)) {\r\n            result = result.concat(valOrPath);\r\n        }\r\n        else {\r\n            result.push(valOrPath);\r\n        }\r\n        return result;\r\n    }, []);\r\n};\r\n\r\n// PRIVATE METHODS\r\n\r\nJSONPath.prototype._getPreferredOutput = function (ea) {\r\n    var resultType = this.currResultType;\r\n    switch (resultType) {\r\n    case 'all':\r\n        ea.path = typeof ea.path === 'string' ? ea.path : JSONPath.toPathString(ea.path);\r\n        return ea;\r\n    case 'value': case 'parent': case 'parentProperty':\r\n        return ea[resultType];\r\n    case 'path':\r\n        return JSONPath.toPathString(ea[resultType]);\r\n    case 'pointer':\r\n        return JSONPath.toPointer(ea.path);\r\n    }\r\n};\r\n\r\nJSONPath.prototype._handleCallback = function (fullRetObj, callback, type) {\r\n    if (callback) {\r\n        var preferredOutput = this._getPreferredOutput(fullRetObj);\r\n        fullRetObj.path = typeof fullRetObj.path === 'string' ? fullRetObj.path : JSONPath.toPathString(fullRetObj.path);\r\n        callback(preferredOutput, type, fullRetObj);\r\n    }\r\n};\r\n\r\nJSONPath.prototype._trace = function (expr, val, path, parent, parentPropName, callback, literalPriority) {\r\n    // No expr to follow? return path and value as the result of this trace branch\r\n    var retObj, self = this;\r\n    if (!expr.length) {\r\n        retObj = {path: path, value: val, parent: parent, parentProperty: parentPropName};\r\n        this._handleCallback(retObj, callback, 'value');\r\n        return retObj;\r\n    }\r\n\r\n    var loc = expr[0], x = expr.slice(1);\r\n\r\n    // We need to gather the return value of recursive trace calls in order to\r\n    // do the parent sel computation.\r\n    var ret = [];\r\n    function retPush (elem) {\r\n        ret.push(elem);\r\n    }\r\n    function addRet (elems) {\r\n        if (Array.isArray(elems)) {\r\n            elems.forEach(retPush);\r\n        } else {\r\n            ret.push(elems);\r\n        }\r\n    }\r\n\r\n    if ((typeof loc !== 'string' || literalPriority) && val && Object.prototype.hasOwnProperty.call(val, loc)) { // simple case--directly follow property\r\n        addRet(this._trace(x, val[loc], push(path, loc), val, loc, callback));\r\n    }\r\n    else if (loc === '*') { // all child properties\r\n        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {\r\n            addRet(self._trace(unshift(m, x), v, p, par, pr, cb, true));\r\n        });\r\n    }\r\n    else if (loc === '..') { // all descendent parent properties\r\n        addRet(this._trace(x, val, path, parent, parentPropName, callback)); // Check remaining expression with val's immediate children\r\n        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {\r\n            // We don't join m and x here because we only want parents, not scalar values\r\n            if (typeof v[m] === 'object') { // Keep going with recursive descent on val's object children\r\n                addRet(self._trace(unshift(l, x), v[m], push(p, m), v, m, cb));\r\n            }\r\n        });\r\n    }\r\n    // The parent sel computation is handled in the frame above using the\r\n    // ancestor object of val\r\n    else if (loc === '^') {\r\n        // This is not a final endpoint, so we do not invoke the callback here\n        this._hasParentSelector = true;\n        return path.length ? {\r\n            path: path.slice(0, -1),\r\n            expr: x,\r\n            isParentSelector: true\r\n        } : [];\r\n    }\r\n    else if (loc === '~') { // property name\r\n        retObj = {path: push(path, loc), value: parentPropName, parent: parent, parentProperty: null};\r\n        this._handleCallback(retObj, callback, 'property');\r\n        return retObj;\r\n    }\r\n    else if (loc === '$') { // root only\r\n        addRet(this._trace(x, val, path, null, null, callback));\r\n    }\r\n    else if (/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(loc)) { // [start:end:step]  Python slice syntax\r\n        addRet(this._slice(loc, x, val, path, parent, parentPropName, callback));\r\n    }\r\n    else if (loc.indexOf('?(') === 0) { // [?(expr)] (filtering)\r\n        if (this.currPreventEval) {\r\n            throw new Error('Eval [?(expr)] prevented in JSONPath expression.');\r\n        }\r\n        this._walk(loc, x, val, path, parent, parentPropName, callback, function (m, l, x, v, p, par, pr, cb) {\r\n            if (self._eval(l.replace(/^\\?\\((.*?)\\)$/, '$1'), v[m], m, p, par, pr)) {\r\n                addRet(self._trace(unshift(m, x), v, p, par, pr, cb));\r\n            }\r\n        });\r\n    }\r\n    else if (loc[0] === '(') { // [(expr)] (dynamic property/index)\r\n        if (this.currPreventEval) {\r\n            throw new Error('Eval [(expr)] prevented in JSONPath expression.');\r\n        }\r\n        // As this will resolve to a property name (but we don't know it yet), property and parent information is relative to the parent of the property to which this expression will resolve\r\n        addRet(this._trace(unshift(this._eval(loc, val, path[path.length - 1], path.slice(0, -1), parent, parentPropName), x), val, path, parent, parentPropName, callback));\r\n    }\r\n    else if (loc[0] === '@') { // value type: @boolean(), etc.\r\n        var addType = false;\r\n        var valueType = loc.slice(1, -2);\r\n        switch (valueType) {\r\n        case 'scalar':\r\n            if (!val || !(['object', 'function'].includes(typeof val))) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'boolean': case 'string': case 'undefined': case 'function':\r\n            if (typeof val === valueType) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'number':\r\n            if (typeof val === valueType && isFinite(val)) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'nonFinite':\r\n            if (typeof val === 'number' && !isFinite(val)) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'object':\r\n            if (val && typeof val === valueType) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'array':\r\n            if (Array.isArray(val)) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'other':\r\n            addType = this.currOtherTypeCallback(val, path, parent, parentPropName);\r\n            break;\r\n        case 'integer':\r\n            if (val === +val && isFinite(val) && !(val % 1)) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        case 'null':\r\n            if (val === null) {\r\n                addType = true;\r\n            }\r\n            break;\r\n        }\r\n        if (addType) {\r\n            retObj = {path: path, value: val, parent: parent, parentProperty: parentPropName};\r\n            this._handleCallback(retObj, callback, 'value');\r\n            return retObj;\r\n        }\r\n    }\r\n    else if (loc[0] === '`' && val && Object.prototype.hasOwnProperty.call(val, loc.slice(1))) { // `-escaped property\r\n        var locProp = loc.slice(1);\r\n        addRet(this._trace(x, val[locProp], push(path, locProp), val, locProp, callback, true));\r\n    }\r\n    else if (loc.includes(',')) { // [name1,name2,...]\r\n        var parts, i;\r\n        for (parts = loc.split(','), i = 0; i < parts.length; i++) {\r\n            addRet(this._trace(unshift(parts[i], x), val, path, parent, parentPropName, callback));\r\n        }\r\n    }\r\n    else if (!literalPriority && val && Object.prototype.hasOwnProperty.call(val, loc)) { // simple case--directly follow property\r\n        addRet(this._trace(x, val[loc], push(path, loc), val, loc, callback, true));\r\n    }\r\n\r\n    // We check the resulting values for parent selections. For parent\r\n    // selections we discard the value object and continue the trace with the\r\n    // current val object\n    if (this._hasParentSelector) {\n        for (var t = 0; t < ret.length; t++) {\n            var rett = ret[t];\r\n            if (rett.isParentSelector) {\n                var tmp = self._trace(rett.expr, val, rett.path, parent, parentPropName, callback);\r\n                if (Array.isArray(tmp)) {\r\n                    ret[t] = tmp[0];\r\n                    for (var tt = 1, tl = tmp.length; tt < tl; tt++) {\r\n                        t++;\r\n                        ret.splice(t, 0, tmp[tt]);\r\n                    }\r\n                } else {\r\n                    ret[t] = tmp;\r\n                }\r\n            }\r\n        }\n    }\r\n    return ret;\r\n};\n\r\nJSONPath.prototype._walk = function (loc, expr, val, path, parent, parentPropName, callback, f) {\r\n    var i, n, m;\r\n    if (Array.isArray(val)) {\r\n        for (i = 0, n = val.length; i < n; i++) {\r\n            f(i, loc, expr, val, path, parent, parentPropName, callback);\r\n        }\r\n    }\r\n    else if (typeof val === 'object') {\r\n        for (m in val) {\r\n            if (Object.prototype.hasOwnProperty.call(val, m)) {\r\n                f(m, loc, expr, val, path, parent, parentPropName, callback);\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\nJSONPath.prototype._slice = function (loc, expr, val, path, parent, parentPropName, callback) {\r\n    if (!Array.isArray(val)) {return;}\r\n    var i,\r\n        len = val.length, parts = loc.split(':'),\r\n        start = (parts[0] && parseInt(parts[0], 10)) || 0,\r\n        end = (parts[1] && parseInt(parts[1], 10)) || len,\r\n        step = (parts[2] && parseInt(parts[2], 10)) || 1;\r\n    start = (start < 0) ? Math.max(0, start + len) : Math.min(len, start);\r\n    end = (end < 0) ? Math.max(0, end + len) : Math.min(len, end);\r\n    var ret = [];\r\n    for (i = start; i < end; i += step) {\r\n        var tmp = this._trace(unshift(i, expr), val, path, parent, parentPropName, callback);\r\n        if (Array.isArray(tmp)) {\r\n            tmp.forEach(function (t) {\r\n                ret.push(t);\r\n            });\r\n        }\r\n        else {\r\n            ret.push(tmp);\r\n        }\r\n    }\r\n    return ret;\r\n};\r\n\r\nJSONPath.prototype._eval = function (code, _v, _vname, path, parent, parentPropName) {\r\n    if (!this._obj || !_v) {return false;}\r\n    if (code.includes('@parentProperty')) {\r\n        this.currSandbox._$_parentProperty = parentPropName;\r\n        code = code.replace(/@parentProperty/g, '_$_parentProperty');\r\n    }\r\n    if (code.includes('@parent')) {\r\n        this.currSandbox._$_parent = parent;\r\n        code = code.replace(/@parent/g, '_$_parent');\r\n    }\r\n    if (code.includes('@property')) {\r\n        this.currSandbox._$_property = _vname;\r\n        code = code.replace(/@property/g, '_$_property');\r\n    }\r\n    if (code.includes('@path')) {\r\n        this.currSandbox._$_path = JSONPath.toPathString(path.concat([_vname]));\r\n        code = code.replace(/@path/g, '_$_path');\r\n    }\r\n    if (code.match(/@([\\.\\s\\)\\[])/)) {\r\n        this.currSandbox._$_v = _v;\r\n        code = code.replace(/@([\\.\\s\\)\\[])/g, '_$_v$1');\r\n    }\r\n    try {\r\n        return vm.runInNewContext(code, this.currSandbox);\r\n    }\r\n    catch (e) {\r\n        console.log(e);\r\n        throw new Error('jsonPath: ' + e.message + ': ' + code);\r\n    }\r\n};\r\n\r\n// PUBLIC CLASS PROPERTIES AND METHODS\r\n\r\n// Could store the cache object itself\r\nJSONPath.cache = {};\r\n\r\nJSONPath.toPathString = function (pathArr) {\r\n    var i, n, x = pathArr, p = '$';\r\n    for (i = 1, n = x.length; i < n; i++) {\r\n        if (!(/^(~|\\^|@.*?\\(\\))$/).test(x[i])) {\r\n            p += (/^[0-9*]+$/).test(x[i]) ? ('[' + x[i] + ']') : (\"['\" + x[i] + \"']\");\r\n        }\r\n    }\r\n    return p;\r\n};\r\n\r\nJSONPath.toPointer = function (pointer) {\r\n    var i, n, x = pointer, p = '';\r\n    for (i = 1, n = x.length; i < n; i++) {\r\n        if (!(/^(~|\\^|@.*?\\(\\))$/).test(x[i])) {\r\n            p += '/' + x[i].toString()\r\n                  .replace(/\\~/g, '~0')\r\n                  .replace(/\\//g, '~1');\r\n        }\r\n    }\r\n    return p;\r\n};\r\n\r\nJSONPath.toPathArray = function (expr) {\r\n    var cache = JSONPath.cache;\r\n    if (cache[expr]) {return cache[expr].concat();}\r\n    var subx = [];\r\n    var normalized = expr\r\n                    // Properties\r\n                    .replace(/@(?:null|boolean|number|string|integer|undefined|nonFinite|scalar|array|object|function|other)\\(\\)/g, ';$&;')\r\n                    // Parenthetical evaluations (filtering and otherwise), directly within brackets or single quotes\r\n                    .replace(/[\\['](\\??\\(.*?\\))[\\]']/g, function ($0, $1) {return '[#' + (subx.push($1) - 1) + ']';})\r\n                    // Escape periods and tildes within properties\r\n                    .replace(/\\['([^'\\]]*)'\\]/g, function ($0, prop) {\r\n                        return \"['\" + prop\r\n                            .replace(/\\./g, '%@%')\r\n                            .replace(/~/g, '%%@@%%') +\r\n                            \"']\";\r\n                    })\r\n                    // Properties operator\r\n                    .replace(/~/g, ';~;')\r\n                    // Split by property boundaries\r\n                    .replace(/'?\\.'?(?![^\\[]*\\])|\\['?/g, ';')\r\n                    // Reinsert periods within properties\r\n                    .replace(/%@%/g, '.')\r\n                    // Reinsert tildes within properties\r\n                    .replace(/%%@@%%/g, '~')\r\n                    // Parent\r\n                    .replace(/(?:;)?(\\^+)(?:;)?/g, function ($0, ups) {return ';' + ups.split('').join(';') + ';';})\r\n                    // Descendents\r\n                    .replace(/;;;|;;/g, ';..;')\r\n                    // Remove trailing\r\n                    .replace(/;$|'?\\]|'$/g, '');\r\n\r\n    var exprList = normalized.split(';').map(function (expr) {\r\n        var match = expr.match(/#([0-9]+)/);\r\n        return !match || !match[1] ? expr : subx[match[1]];\r\n    });\r\n    cache[expr] = exprList;\r\n    return cache[expr];\r\n};\r\n\r\n// For backward compatibility (deprecated)\r\nJSONPath.eval = function (obj, expr, opts) {\r\n    return JSONPath(opts, expr, obj);\r\n};\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define(function () {return JSONPath;});\r\n}\r\nelse if (isNode) {\r\n    module.exports = JSONPath;\r\n}\r\nelse {\r\n    glbl.jsonPath = { // Deprecated\r\n        eval: JSONPath.eval\r\n    };\r\n    glbl.JSONPath = JSONPath;\r\n}\r\n}(this || self, typeof require === 'undefined' ? null : require));\r\n"]}